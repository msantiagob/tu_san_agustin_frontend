---
import { Image } from 'astro:assets';

interface Props {
    title: string;
    description?: string;
    image: string | any;
    variant?: 'default' | 'blog';
    url?: string;
    width?: number;
    height?: number;
    loading?: 'lazy' | 'eager';
    fetchpriority?: 'high' | 'low' | 'auto';
}

const { 
    title, 
    description, 
    image, 
    variant = 'default', 
    url = '#', 
    width = 450, 
    height = 450,
    loading = 'lazy',
    fetchpriority = 'auto'
} = Astro.props;
const isBlog = variant === 'blog';

// Check if image is an imported asset (object) or a string
const isAsset = typeof image !== 'string';
---

<div class="swiper-slide group cursor-grab active:cursor-grabbing pb-12 text-center">
    <div class="relative w-full h-80 md:h-64 mb-6">
        {isAsset ? (
            <Image 
                src={image} 
                alt={title}
                width={width}
                height={height}
                loading={loading}
                fetchpriority={fetchpriority}
                class="w-full h-full object-cover rounded-[32px] shadow-md pointer-events-none select-none"
                widths={[400, 600, 800]}
                quality={70}
            />
        ) : (
            <img 
                src={image} 
                alt={title}
                class="w-full h-full object-cover rounded-[32px] shadow-md pointer-events-none select-none"
                loading={loading}
                fetchpriority={fetchpriority}
                width={width}
                height={height}
            />
        )}
        
        <a href={url} class="absolute -bottom-4 -right-4 bg-[#333638] text-white w-14 h-14 rounded-full flex items-center justify-center border-[6px] border-[#FDF5E9] transition-transform group-hover:scale-110 z-20">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7h10v10"/><path d="M7 17 17 7"/></svg>
        </a>
    </div>
    <div class="px-4">
        <h3 class="text-xl font-bold text-[#4EAC9F] mb-2" style="font-family: 'Poppins', sans-serif;">
            {title}
        </h3>
        {description && <p class="text-[#333638] text-sm leading-relaxed" style="font-family: 'Poppins', sans-serif;">{description}</p>}
    </div>
</div>
