---
interface Props {
  image: string;
  text: string;
  link: string;
  linkUrl: string;
}

const { image, text, link, linkUrl } = Astro.props;

// Function to highlight specific names
const highlightNames = (text: string) => {
  const names = ["Fincadool", "Fincal Forest", "San Agustín", "Orquiderama Jardín Botánico"];
  let result = text;
  names.forEach(name => {
    const regex = new RegExp(name, 'g');
    result = result.replace(regex, `<span class="text-[#4a9a8c]">${name}</span>`);
  });
  return result;
};

const highlightedText = highlightNames(text);
---

<div class="testimonial-card flex flex-col items-center transition-all w-full max-w-[280px]">
  <!-- Circular Image -->
  <div class="relative z-10 mb-[-70px]">
    <div class="rounded-full overflow-hidden border-4 border-[#f5f0e6] w-[140px] h-[140px] shadow-md bg-white">
      <img
        src={image || "/placeholder.svg"}
        alt={link}
        class="object-cover w-full h-full"
      />
    </div>
  </div>

  <div class="bg-[#c4c4c4] rounded-[30px] px-6 pt-16 pb-10 flex flex-col items-center text-center min-h-[420px] w-full shadow-sm" style="font-family: 'Poppins', sans-serif;">
    <p class="text-[#3a3a3a] leading-relaxed flex-grow text-sm" set:html={highlightedText} />

    <div class="mt-6 flex flex-col items-center">
      <!-- Link -->
      <a
        href={linkUrl}
        class="text-[#4a9a8c] underline underline-offset-4 mb-4 hover:text-[#3d857a] transition-colors text-sm font-medium"
      >
        {link}
      </a>

      <!-- Ver más Button -->
      <button
        class="bg-[#009688] text-white rounded-full px-8 py-2.5 hover:bg-[#00796b] transition-colors text-sm font-semibold shadow-sm"
      >
        Ver más
      </button>
    </div>
  </div>
</div>

<style>
  .testimonial-card {
    /* Base style for non-centered slides is handled by Swiper/Parent */
  }
</style>
