---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  lang?: 'es' | 'en';
  bannerImage?: ImageMetadata;
  title?: string;
  subtitle?: string;
}

const {
  lang = 'es',
  bannerImage,
  title = 'Invitados, Vuelos',
  subtitle = 'y Etiqueta'
} = Astro.props;
---

<div class="w-[calc(100%-8px)] md:w-[calc(100%-16px)] max-w-[2000px] h-[650px] md:h-[800px] relative rounded-[2rem] md:rounded-[3rem] overflow-hidden mx-auto">
    {bannerImage && (
        <Image
            src={bannerImage}
            class="absolute inset-0 w-full h-full object-cover banner-zoom-animation"
            style="object-position: center;"
            alt={title}
            loading="eager"
            fetchpriority="high"
            width={1600}
            height={900}
            widths={[480, 768, 1024, 1280, 1600]}
            sizes="(max-width: 768px) 100vw, 1600px"
            format="avif"
            quality={75}
        />
    )}

    <!-- Text Overlay -->
    <div class="absolute inset-0 flex flex-col justify-center items-center px-6 md:px-24 text-white z-20 pointer-events-none">
         <div class="text-center mt-10 md:mt-20">
            <h1 class="text-4xl md:text-6xl lg:text-7xl font-poppins font-bold drop-shadow-2xl leading-none tracking-tight">
                {title}
            </h1>
            {subtitle && (
                <h2 class="text-4xl md:text-6xl lg:text-7xl font-poppins font-bold drop-shadow-2xl leading-tight mt-1 md:mt-0 opacity-95">
                    {subtitle}
                </h2>
            )}
         </div>
    </div>

    <!-- Navigation Bar (Top) -->
    <div class="absolute top-0 left-0 right-0 z-30 w-full px-4 py-6 md:px-12 md:py-10 flex flex-row items-center justify-between bg-gradient-to-b from-black/90 via-black/40 to-transparent">

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-toggle" class="md:hidden p-2 rounded-full hover:bg-white/10 transition-colors" aria-label="Abrir menú">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><line x1="3" x2="21" y1="6" y2="6"/><line x1="3" x2="21" y1="12" y2="12"/><line x1="3" x2="21" y1="18" y2="18"/></svg>
        </button>

        <!-- Left Menu (Desktop) -->
        <div class="hidden md:flex flex-1 justify-start gap-8 pb-1 items-center">
            <a href="https://www.tusanagustin.com/" class="nav-text-link">Inicio</a>

            <!-- Eventos Dropdown -->
            <div class="relative group">
                <button class="nav-text-link flex items-center gap-1 focus:outline-none">
                    Eventos
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform group-hover:rotate-180"><path d="m6 9 6 6 6-6"/></svg>
                </button>
                <div class="absolute top-full left-0 mt-2 w-56 bg-white/95 backdrop-blur-md rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform origin-top-left -translate-y-2 group-hover:translate-y-0 text-left overflow-hidden border border-white/20">
                     <a href="https://www.tusanagustin.com/eventos/bodas" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Bodas</a>
                    <a href="https://www.tusanagustin.com/eventos/bodas-destino" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Bodas Destino</a>
                    <a href="https://www.tusanagustin.com/eventos/15-anos" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Quinces Años</a>
                    <a href="https://www.tusanagustin.com/eventos/corporativos" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Corporativos</a>
                    <a href="https://www.tusanagustin.com/eventos/sociales" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Sociales</a>
                </div>
            </div>

            <!-- Servicios Dropdown -->
             <div class="relative group">
                <button class="nav-text-link flex items-center gap-1 focus:outline-none">
                    Servicios
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform group-hover:rotate-180"><path d="m6 9 6 6 6-6"/></svg>
                </button>
                <div class="absolute top-full left-0 mt-2 w-72 bg-white/95 backdrop-blur-md rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform origin-top-left -translate-y-2 group-hover:translate-y-0 text-left overflow-hidden border border-white/20">
                    <a href="https://www.tusanagustin.com/servicios/catering" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Catering</a>
                    <a href="https://www.tusanagustin.com/servicios/decoracion" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Decoración</a>
                    <a href="https://www.tusanagustin.com/servicios/event-wedding-planner" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Event & Wedding Planner</a>
                    <a href="https://www.tusanagustin.com/servicios/lugares" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Lugares para eventos</a>
                    <a href="https://www.tusanagustin.com/servicios/artistas" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Artistas y espectáculos</a>
                    <a href="https://www.tusanagustin.com/servicios/fotografia" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Fotografía y video</a>
                    <a href="https://www.tusanagustin.com/servicios/audiovisuales" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Ayudas audiovisuales</a>
                    <a href="https://www.tusanagustin.com/servicios/carros-antiguos" class="block px-6 py-3 text-gray-800 hover:bg-[#4EAC9F] hover:text-white transition-colors font-medium border-b border-gray-100 last:border-0">Carros antiguos</a>
                </div>
            </div>

             <a href="https://www.tusanagustin.com/historias-de-eventos-reales" class="nav-text-link">Historias</a>
        </div>


        <!-- Right Menu (Desktop) -->
        <div class="hidden md:flex flex-1 justify-end gap-8 pb-1 items-center">
             <a href="https://www.tusanagustin.com/blog" class="nav-text-link">Blog</a>
             <a href="https://www.tusanagustin.com/bodas-destino" class="nav-text-link">Bodas de Destino</a>
             <a href="https://www.tusanagustin.com/quienes-somos" class="nav-text-link">Nosotros</a>
        </div>

        <!-- Empty spacer for mobile balance -->
        <div class="md:hidden w-10"></div>
    </div>
</div>

<style>
    /* Banner Image Zoom Out Animation */
    .banner-zoom-animation {
        animation: zoomOut 2s ease-out forwards;
    }

    @keyframes zoomOut {
        from {
            transform: scale(1.1);
        }
        to {
            transform: scale(1);
        }
    }

    /* Estilo Enlaces de Texto (Solo Desktop) */
    .nav-text-link {
        color: rgba(255, 255, 255, 0.95);
        font-family: 'Playfair Display', serif;
        font-size: 1.25rem;
        font-weight: 600;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.3s ease;
        text-shadow: 0 4px 8px rgba(0,0,0,0.9);
        white-space: nowrap;
        letter-spacing: 0.02em;
    }
    .nav-text-link:hover {
        color: #ffffff;
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
        transform: scale(1.05);
    }

    .font-poppins { font-family: 'Poppins', sans-serif; }

    /* Mobile Sidebar */
    .mobile-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 100;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .mobile-sidebar.active {
        opacity: 1;
        visibility: visible;
    }

    .mobile-sidebar-content {
        position: absolute;
        top: 0;
        left: 0;
        width: 80%;
        max-width: 320px;
        height: 100%;
        background: #FDF5E9;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        overflow-y: auto;
    }

    .mobile-sidebar.active .mobile-sidebar-content {
        transform: translateX(0);
    }

    .mobile-nav-link {
        display: block;
        padding: 1rem 1.5rem;
        color: #333638;
        font-family: 'Poppins', sans-serif;
        font-size: 1rem;
        font-weight: 500;
        text-decoration: none;
        border-bottom: 1px solid rgba(0,0,0,0.1);
        transition: all 0.2s ease;
    }

    .mobile-nav-link:hover {
        background: #4EAC9F;
        color: white;
    }

    .mobile-nav-section {
        padding: 0.75rem 1.5rem;
        color: #4EAC9F;
        font-family: 'Poppins', sans-serif;
        font-size: 0.875rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
</style>

<!-- Mobile Sidebar -->
<div id="mobile-sidebar" class="mobile-sidebar">
    <div class="mobile-sidebar-content">
        <!-- Close Button -->
        <div class="flex justify-end p-4">
            <button id="mobile-menu-close" class="p-2 hover:bg-gray-100 rounded-full transition-colors" aria-label="Cerrar menú">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-700"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            </button>
        </div>

        <!-- Navigation Links -->
        <nav class="pb-8">
            <a href="https://www.tusanagustin.com/" class="mobile-nav-link">Inicio</a>

            <div class="mobile-nav-section">Eventos</div>
            <a href="https://www.tusanagustin.com/eventos/bodas" class="mobile-nav-link">Bodas</a>
            <a href="https://www.tusanagustin.com/eventos/bodas-destino" class="mobile-nav-link">Bodas Destino</a>
            <a href="https://www.tusanagustin.com/eventos/15-anos" class="mobile-nav-link">Quinces Años</a>
            <a href="https://www.tusanagustin.com/eventos/corporativos" class="mobile-nav-link">Corporativos</a>
            <a href="https://www.tusanagustin.com/eventos/sociales" class="mobile-nav-link">Sociales</a>

            <div class="mobile-nav-section">Servicios</div>
            <a href="https://www.tusanagustin.com/servicios/catering" class="mobile-nav-link">Catering</a>
            <a href="https://www.tusanagustin.com/servicios/decoracion" class="mobile-nav-link">Decoración</a>
            <a href="https://www.tusanagustin.com/servicios/event-wedding-planner" class="mobile-nav-link">Event & Wedding Planner</a>
            <a href="https://www.tusanagustin.com/servicios/lugares" class="mobile-nav-link">Lugares para eventos</a>
            <a href="https://www.tusanagustin.com/servicios/artistas" class="mobile-nav-link">Artistas y espectáculos</a>
            <a href="https://www.tusanagustin.com/servicios/fotografia" class="mobile-nav-link">Fotografía y video</a>
            <a href="https://www.tusanagustin.com/servicios/audiovisuales" class="mobile-nav-link">Ayudas audiovisuales</a>
            <a href="https://www.tusanagustin.com/servicios/carros-antiguos" class="mobile-nav-link">Carros antiguos</a>

            <div class="mobile-nav-section">Más</div>
            <a href="https://www.tusanagustin.com/historias-de-eventos-reales" class="mobile-nav-link">Historias</a>
            <a href="https://www.tusanagustin.com/blog" class="mobile-nav-link">Blog</a>
            <a href="https://www.tusanagustin.com/bodas-destino" class="mobile-nav-link">Bodas de Destino</a>
            <a href="https://www.tusanagustin.com/quienes-somos" class="mobile-nav-link">Nosotros</a>
        </nav>
    </div>
</div>

<script>
    const menuToggle = document.getElementById('mobile-menu-toggle');
    const menuClose = document.getElementById('mobile-menu-close');
    const sidebar = document.getElementById('mobile-sidebar');

    menuToggle?.addEventListener('click', () => {
        sidebar?.classList.add('active');
        document.body.style.overflow = 'hidden';
    });

    menuClose?.addEventListener('click', () => {
        sidebar?.classList.remove('active');
        document.body.style.overflow = '';
    });

    sidebar?.addEventListener('click', (e) => {
        if (e.target === sidebar) {
            sidebar.classList.remove('active');
            document.body.style.overflow = '';
        }
    });
</script>
