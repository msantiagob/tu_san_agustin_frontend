---
import ServiceCard from './ui/ServiceCard.astro';

const blogs = [
    {
        title: "Bodas Destino",
        description: "El Destino Perfecto para tu Boda de Ensueño",
        image: "images/Tu-San-Agustin-Home_47.webp",
        url: "#"
    },
    {
        title: "Mejores lugares para eventos",
        description: "¡Descubre los 20 Mejores Lugares para Eventos en Medellín!",
        image: "images/Tu-San-Agustin-Home_50.webp",
        url: "#"
    },
    {
        title: "Alimentación Hospitalaria",
        description: "Alimentación Hospitalaria: Un Pilar Fundamental en la Recuperación y Bienestar del Paciente.",
        image: "images/Tu-San-Agustin-Home_53.webp",
        url: "#"
    }
];

// Duplicate for smoother infinite loop feeling
const infiniteBlogs = [...blogs, ...blogs];
---

<section class="bg-[#FDF5E9] py-10 md:py-20 px-4 md:px-10">
    <div class="max-w-[1400px] mx-auto space-y-12">
        
        <!-- Heading -->
        <h2 class="text-5xl md:text-7xl font-extrabold flex flex-col leading-[1.05] max-w-6xl mx-auto">
            <span class="text-[#4BB3A1]">Blogs             <span class="text-[#D1C1A3]">, Ideas y </span>
 </span>
            <span class="text-[#D1C1A3]">Concejos</span>
        </h2>

        <div class="relative group">
            <!-- Navigation Buttons -->
            <button class="swiper-prev-blogs absolute left-0 md:-left-12 top-[40%] md:top-[35%] -translate-y-1/2 z-20 w-12 h-12 bg-white rounded-full shadow-xl flex items-center justify-center hover:bg-gray-50 transition-all border border-gray-100 text-gray-800 cursor-pointer duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            </button>
            <button class="swiper-next-blogs absolute right-0 md:-right-12 top-[40%] md:top-[35%] -translate-y-1/2 z-20 w-12 h-12 bg-white rounded-full shadow-xl flex items-center justify-center hover:bg-gray-50 transition-all border border-gray-100 text-gray-800 cursor-pointer duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            </button>

            <!-- Swiper Carousel -->
            <div class="swiper mySwiperBlogs !pb-12 !px-4">
                <div class="swiper-wrapper">
                    {infiniteBlogs.map((blog, index) => (
                        <div class="swiper-slide">
                            <ServiceCard 
                                variant="blog" 
                                title={blog.title} 
                                description={blog.description}
                                image={blog.image} 
                                url={blog.url} 
                            />
                        </div>
                    ))}
                </div>
                
                <div class="swiper-pagination"></div>
            </div>
        </div>
    </div>
</section>

<script>
    import Swiper from 'swiper';
    import { Pagination, Autoplay, Navigation } from 'swiper/modules';
    import 'swiper/css';
    import 'swiper/css/pagination';
    import 'swiper/css/navigation';

    // Initialize Swiper
    const initBlogsSwiper = () => {
        new Swiper(".mySwiperBlogs", {
            modules: [Pagination, Autoplay, Navigation],
            slidesPerView: 1,
            spaceBetween: 30,
            loop: true,
            grabCursor: true,
            autoplay: {
                delay: 4000,
                disableOnInteraction: false,
            },
           
            navigation: {
                nextEl: ".swiper-next-blogs",
                prevEl: ".swiper-prev-blogs",
            },
            breakpoints: {
                640: {
                    slidesPerView: 2,
                    spaceBetween: 30,
                },
                1024: {
                    slidesPerView: 3,
                    spaceBetween: 40,
                },
            },
        });
    };

    // Run on load and on Astro page transitions
    initBlogsSwiper();
    document.addEventListener('astro:page-load', initBlogsSwiper);
</script>

<style>
    :global(.mySwiperBlogs .swiper-pagination-bullet) {
        background-color: #CBD5E0;
        opacity: 1;
        width: 10px;
        height: 10px;
        transition: all 0.3s ease;
    }
    :global(.mySwiperBlogs .swiper-pagination-bullet-active) {
        background-color: #4BB3A1;
        width: 30px;
        border-radius: 5px;
    }
</style>
